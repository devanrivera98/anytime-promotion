"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.checkingNonExistentRole = void 0;
const ml_spec_1 = require("@markuplint/ml-spec");
const checkingNonExistentRole = ({ attr }) => t => {
    var _a;
    const { roles, graphicsRoles } = (0, ml_spec_1.ariaSpecs)(attr.ownerMLDocument.specs, attr.rule.options.version);
    const tokens = (_a = attr.tokenList) === null || _a === void 0 ? void 0 : _a.allTokens();
    if (!tokens) {
        return;
    }
    for (const token of tokens) {
        let role = roles.find(r => r.name === token.raw);
        if (!role && attr.ownerElement.namespaceURI === 'http://www.w3.org/2000/svg') {
            role = graphicsRoles.find(r => r.name === token.raw);
        }
        if (!role) {
            return {
                scope: token,
                message: t('{0} according to {1}', t('{0} does not exist', t('the "{0*}" {1}', token.raw, 'role')), 'the WAI-ARIA specification') +
                    t('.') +
                    // TODO: Translate
                    ` This "${token.raw}" role does not exist in WAI-ARIA.`,
            };
        }
    }
};
exports.checkingNonExistentRole = checkingNonExistentRole;
