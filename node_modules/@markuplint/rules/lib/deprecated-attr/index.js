"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ml_core_1 = require("@markuplint/ml-core");
exports.default = (0, ml_core_1.createRule)({
    async verify({ document, report, t }) {
        await document.walkOn('Attr', attr => {
            var _a, _b, _c;
            const attrSpecs = (0, ml_core_1.getAttrSpecs)(attr.ownerElement, document.specs);
            if (!attrSpecs) {
                return;
            }
            const name = attr.name;
            const attrSpec = attrSpecs.find(item => item.name === name);
            if (!attrSpec) {
                return;
            }
            if (attrSpec.deprecated || attrSpec.obsolete) {
                const message = t('{0} is {1:c}', t('the "{0*}" {1}', name, 'attribute'), attrSpec.obsolete ? 'obsolete' : 'deprecated');
                report({
                    scope: attr,
                    line: (_a = attr.nameNode) === null || _a === void 0 ? void 0 : _a.startLine,
                    col: (_b = attr.nameNode) === null || _b === void 0 ? void 0 : _b.startCol,
                    raw: (_c = attr.nameNode) === null || _c === void 0 ? void 0 : _c.raw,
                    message,
                });
            }
        });
    },
});
