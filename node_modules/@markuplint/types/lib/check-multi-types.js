"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.checkMultiTypes = void 0;
const debug_1 = require("./debug");
const match_result_1 = require("./match-result");
function checkMultiTypes(value, checks) {
    var _a, _b, _c;
    let unmatched;
    for (const check of checks) {
        const res = check(value);
        if (res.matched) {
            return res;
        }
        // @ts-ignore
        res._fn = check.name;
        // @ts-ignore
        (0, debug_1.log)('%s(%d) vs %s(%d)', unmatched === null || unmatched === void 0 ? void 0 : unmatched._fn, unmatched === null || unmatched === void 0 ? void 0 : unmatched.passCount, res._fn, res.passCount);
        const passedA = (_a = unmatched === null || unmatched === void 0 ? void 0 : unmatched.passCount) !== null && _a !== void 0 ? _a : 0;
        const passedB = (_b = res.passCount) !== null && _b !== void 0 ? _b : 0;
        const offsetA = (_c = unmatched === null || unmatched === void 0 ? void 0 : unmatched.offset) !== null && _c !== void 0 ? _c : 0;
        const offsetB = res.offset;
        if (passedA < passedB || (passedA === passedB && offsetA <= offsetB)) {
            unmatched = res;
        }
    }
    const result = unmatched !== null && unmatched !== void 0 ? unmatched : (0, match_result_1.matched)();
    (0, debug_1.log)('%d checks result: %O', checks.length, result);
    return result;
}
exports.checkMultiTypes = checkMultiTypes;
