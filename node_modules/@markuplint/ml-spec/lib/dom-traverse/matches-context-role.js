"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.matchesContextRole = void 0;
const get_computed_role_1 = require("./get-computed-role");
function matchesContextRole(conditions, 
// eslint-disable-next-line @typescript-eslint/prefer-readonly-parameter-types
ownedEl, specs, version) {
    return conditions.some(condition => matchesCondition(condition, ownedEl.parentElement, specs, version));
}
exports.matchesContextRole = matchesContextRole;
function matchesCondition(condition, 
// eslint-disable-next-line @typescript-eslint/prefer-readonly-parameter-types
parentEl, specs, version) {
    const conditions = condition.split(/\s+>\s+/g).reverse();
    while (conditions.length > 0) {
        if (!parentEl) {
            return false;
        }
        const condition = conditions.shift();
        const parentRole = (0, get_computed_role_1.getComputedRole)(specs, parentEl, version, true).role;
        if (condition !== (parentRole === null || parentRole === void 0 ? void 0 : parentRole.name)) {
            return false;
        }
        parentEl = parentEl.parentElement;
    }
    return true;
}
